<template>
  <ArticleDetailLayout 
    :article="article" 
    :category="'tech'"
    :table-of-contents="tableOfContents"
    :related-articles="relatedArticles"
    @like-toggled="onLikeToggled"
  >
    <template #content>
      <div class="content-section">
        <h2 id="section1">å‰è¨€</h2>
        <p>Vue 3 çš„ç»„åˆå¼ APIï¼ˆComposition APIï¼‰æ˜¯ Vue.js æ¡†æ¶çš„ä¸€ä¸ªé‡å¤§æ›´æ–°ï¼Œå®ƒä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§å…¨æ–°çš„ç»„ç»‡ç»„ä»¶é€»è¾‘çš„æ–¹å¼ã€‚ç›¸æ¯”äº Vue 2 çš„é€‰é¡¹å¼ APIï¼Œç»„åˆå¼ API æä¾›äº†æ›´å¥½çš„é€»è¾‘å¤ç”¨ã€ç±»å‹æ¨å¯¼å’Œæ›´çµæ´»çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚</p>
      </div>

      <div class="content-section">
        <h2 id="section2">ç»„åˆå¼ API çš„æ ¸å¿ƒæ¦‚å¿µ</h2>
        <p>ç»„åˆå¼ API çš„æ ¸å¿ƒæ˜¯ setup() å‡½æ•°ï¼Œå®ƒæ˜¯ç»„ä»¶åˆå§‹åŒ–æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ç»„åˆå¼ API çš„å…¥å£ç‚¹ã€‚</p>
        
        <h3>setup() å‡½æ•°</h3>
        <p>setup() å‡½æ•°åœ¨ç»„ä»¶åˆ›å»ºä¹‹å‰æ‰§è¡Œï¼Œå®ƒæ¥æ”¶ props å’Œ context ä¸¤ä¸ªå‚æ•°ã€‚</p>
        
        <div class="code-block">
          <div class="code-header">
            <span class="code-title">åŸºæœ¬çš„ setup å‡½æ•°</span>
            <button class="copy-btn">å¤åˆ¶</button>
          </div>
          <pre><code><span class="keyword">import</span> { <span class="function">ref</span>, <span class="function">reactive</span>, <span class="function">computed</span>, <span class="function">onMounted</span> } <span class="keyword">from</span> <span class="string">'vue'</span>

<span class="keyword">export</span> <span class="keyword">default</span> {
  <span class="function">setup</span>(<span class="variable">props</span>, <span class="variable">context</span>) {
    <span class="comment">// å“åº”å¼æ•°æ®</span>
    <span class="keyword">const</span> <span class="variable">count</span> <span class="operator">=</span> <span class="function">ref</span>(<span class="number">0</span>)
    <span class="keyword">const</span> <span class="variable">user</span> <span class="operator">=</span> <span class="function">reactive</span>({
      <span class="property">name</span>: <span class="string">'Isaac'</span>,
      <span class="property">age</span>: <span class="number">25</span>
    })
    
    <span class="comment">// è®¡ç®—å±æ€§</span>
    <span class="keyword">const</span> <span class="variable">doubleCount</span> <span class="operator">=</span> <span class="function">computed</span>(() <span class="operator">=></span> <span class="variable">count</span>.<span class="property">value</span> <span class="operator">*</span> <span class="number">2</span>)
    
    <span class="comment">// ç”Ÿå‘½å‘¨æœŸé’©å­</span>
    <span class="function">onMounted</span>(() <span class="operator">=></span> {
      <span class="variable">console</span>.<span class="function">log</span>(<span class="string">'ç»„ä»¶å·²æŒ‚è½½'</span>)
    })
    
    <span class="comment">// è¿”å›éœ€è¦åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨çš„æ•°æ®å’Œæ–¹æ³•</span>
    <span class="keyword">return</span> {
      <span class="variable">count</span>,
      <span class="variable">user</span>,
      <span class="variable">doubleCount</span>
    }
  }
}</code></pre>
        </div>
      </div>

      <div class="content-section">
        <h2 id="section3">å“åº”å¼ API</h2>
        <p>Vue 3 æä¾›äº†å¤šç§åˆ›å»ºå“åº”å¼æ•°æ®çš„æ–¹æ³•ï¼š</p>
        
        <div class="feature-list">
          <div class="feature-item">
            <div class="feature-icon">
              <span class="feature-img">ğŸ”„</span>
            </div>
            <div class="feature-content">
              <h4>ref()</h4>
              <p>ç”¨äºåˆ›å»ºå“åº”å¼çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿”å›ä¸€ä¸ªåŒ…å« .value å±æ€§çš„ ref å¯¹è±¡ã€‚</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <span class="feature-img">âš›ï¸</span>
            </div>
            <div class="feature-content">
              <h4>reactive()</h4>
              <p>ç”¨äºåˆ›å»ºå“åº”å¼çš„å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡çš„å“åº”å¼ä»£ç†ã€‚</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <span class="feature-img">âš¡</span>
            </div>
            <div class="feature-content">
              <h4>computed()</h4>
              <p>ç”¨äºåˆ›å»ºè®¡ç®—å±æ€§ï¼ŒåŸºäºå…¶ä¾èµ–çš„å“åº”å¼æ•°æ®è‡ªåŠ¨æ›´æ–°ã€‚</p>
            </div>
          </div>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-title">å“åº”å¼ API ç¤ºä¾‹</span>
            <button class="copy-btn">å¤åˆ¶</button>
          </div>
          <pre><code><span class="comment">// ref - åŸºæœ¬ç±»å‹</span>
<span class="keyword">const</span> <span class="variable">count</span> <span class="operator">=</span> <span class="function">ref</span>(<span class="number">0</span>)
<span class="keyword">const</span> <span class="variable">message</span> <span class="operator">=</span> <span class="function">ref</span>(<span class="string">'Hello Vue 3'</span>)

<span class="comment">// reactive - å¯¹è±¡ç±»å‹</span>
<span class="keyword">const</span> <span class="variable">state</span> <span class="operator">=</span> <span class="function">reactive</span>({
  <span class="property">user</span>: {
    <span class="property">name</span>: <span class="string">'Isaac'</span>,
    <span class="property">email</span>: <span class="string">'isaac@example.com'</span>
  },
  <span class="property">todos</span>: []
})

<span class="comment">// computed - è®¡ç®—å±æ€§</span>
<span class="keyword">const</span> <span class="variable">fullName</span> <span class="operator">=</span> <span class="function">computed</span>(() <span class="operator">=></span> {
  <span class="keyword">return</span> <span class="string">`${<span class="variable">state</span>.<span class="property">user</span>.<span class="property">firstName</span>} ${<span class="variable">state</span>.<span class="property">user</span>.<span class="property">lastName</span>}`</span>
})

<span class="comment">// watch - ä¾¦å¬å™¨</span>
<span class="function">watch</span>(<span class="variable">count</span>, (<span class="variable">newValue</span>, <span class="variable">oldValue</span>) <span class="operator">=></span> {
  <span class="variable">console</span>.<span class="function">log</span>(<span class="string">`count changed from ${<span class="variable">oldValue</span>} to ${<span class="variable">newValue</span>}`</span>)
})</code></pre>
        </div>
      </div>

      <div class="content-section">
        <h2 id="section4">ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰</h2>
        <p>ç»„åˆå¼å‡½æ•°æ˜¯åˆ©ç”¨ Vue ç»„åˆå¼ API æ¥å°è£…å’Œå¤ç”¨æœ‰çŠ¶æ€é€»è¾‘çš„å‡½æ•°ã€‚è¿™æ˜¯ç»„åˆå¼ API æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€ã€‚</p>
        
        <div class="code-block">
          <div class="code-header">
            <span class="code-title">useCounter ç»„åˆå¼å‡½æ•°</span>
            <button class="copy-btn">å¤åˆ¶</button>
          </div>
          <pre><code><span class="comment">// useCounter.js</span>
<span class="keyword">import</span> { <span class="function">ref</span>, <span class="function">computed</span> } <span class="keyword">from</span> <span class="string">'vue'</span>

<span class="keyword">export</span> <span class="keyword">function</span> <span class="function">useCounter</span>(<span class="variable">initialValue</span> <span class="operator">=</span> <span class="number">0</span>) {
  <span class="keyword">const</span> <span class="variable">count</span> <span class="operator">=</span> <span class="function">ref</span>(<span class="variable">initialValue</span>)
  
  <span class="keyword">const</span> <span class="variable">increment</span> <span class="operator">=</span> () <span class="operator">=></span> <span class="variable">count</span>.<span class="property">value</span><span class="operator">++</span>
  <span class="keyword">const</span> <span class="variable">decrement</span> <span class="operator">=</span> () <span class="operator">=></span> <span class="variable">count</span>.<span class="property">value</span><span class="operator">--</span>
  <span class="keyword">const</span> <span class="variable">reset</span> <span class="operator">=</span> () <span class="operator">=></span> <span class="variable">count</span>.<span class="property">value</span> <span class="operator">=</span> <span class="variable">initialValue</span>
  
  <span class="keyword">const</span> <span class="variable">isEven</span> <span class="operator">=</span> <span class="function">computed</span>(() <span class="operator">=></span> <span class="variable">count</span>.<span class="property">value</span> <span class="operator">%</span> <span class="number">2</span> <span class="operator">===</span> <span class="number">0</span>)
  
  <span class="keyword">return</span> {
    <span class="variable">count</span>,
    <span class="variable">increment</span>,
    <span class="variable">decrement</span>,
    <span class="variable">reset</span>,
    <span class="variable">isEven</span>
  }
}</code></pre>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span class="code-title">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç»„åˆå¼å‡½æ•°</span>
            <button class="copy-btn">å¤åˆ¶</button>
          </div>
          <pre><code><span class="comment">// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="keyword">import</span> { <span class="function">useCounter</span> } <span class="keyword">from</span> <span class="string">'./composables/useCounter'</span>

<span class="keyword">export</span> <span class="keyword">default</span> {
  <span class="function">setup</span>() {
    <span class="keyword">const</span> { <span class="variable">count</span>, <span class="variable">increment</span>, <span class="variable">decrement</span>, <span class="variable">reset</span>, <span class="variable">isEven</span> } <span class="operator">=</span> <span class="function">useCounter</span>(<span class="number">10</span>)
    
    <span class="keyword">return</span> {
      <span class="variable">count</span>,
      <span class="variable">increment</span>,
      <span class="variable">decrement</span>,
      <span class="variable">reset</span>,
      <span class="variable">isEven</span>
    }
  }
}</code></pre>
        </div>
      </div>

      <div class="content-section">
        <h2 id="section5">æœ€ä½³å®è·µ</h2>
        <div class="practice-list">
          <div class="practice-item">
            <div class="practice-icon">
              <span class="practice-img">ğŸ¯</span>
            </div>
            <div class="practice-content">
              <h4>é€»è¾‘åˆ†ç¦»</h4>
              <p>å°†ç›¸å…³çš„é€»è¾‘ç»„åˆåœ¨ä¸€èµ·ï¼Œä½¿ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p>
            </div>
          </div>
          <div class="practice-item">
            <div class="practice-icon">
              <span class="practice-img">ğŸ”„</span>
            </div>
            <div class="practice-content">
              <h4>å¯å¤ç”¨æ€§</h4>
              <p>åˆ›å»ºç»„åˆå¼å‡½æ•°æ¥å°è£…å¯å¤ç”¨çš„é€»è¾‘ï¼Œæé«˜ä»£ç å¤ç”¨ç‡ã€‚</p>
            </div>
          </div>
          <div class="practice-item">
            <div class="practice-icon">
              <span class="practice-img">ğŸ›¡ï¸</span>
            </div>
            <div class="practice-content">
              <h4>ç±»å‹å®‰å…¨</h4>
              <p>ç»“åˆ TypeScript ä½¿ç”¨ï¼Œè·å¾—æ›´å¥½çš„ç±»å‹æ¨å¯¼å’Œä»£ç æç¤ºã€‚</p>
            </div>
          </div>
        </div>
      </div>

      <div class="content-section">
        <h2 id="section6">æ€»ç»“</h2>
        <p>Vue 3 çš„ç»„åˆå¼ API ä¸ºæˆ‘ä»¬æä¾›äº†æ›´å¼ºå¤§ã€æ›´çµæ´»çš„å¼€å‘ä½“éªŒã€‚é€šè¿‡ setup() å‡½æ•°ã€å“åº”å¼ API å’Œç»„åˆå¼å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ›´æ¨¡å—åŒ–ã€å¯ç»´æŠ¤çš„ Vue åº”ç”¨ã€‚è™½ç„¶å­¦ä¹ æ›²çº¿å¯èƒ½æ¯”é€‰é¡¹å¼ API ç¨é™¡ï¼Œä½†æŒæ¡åå°†å¤§å¤§æå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p>
        
        <div class="highlight-box">
          <h4>
            <span class="tip-icon">ğŸ’¡</span> æç¤º
          </h4>
          <p>ç»„åˆå¼ API å¹¶ä¸æ˜¯ä¸ºäº†å–ä»£é€‰é¡¹å¼ APIï¼Œè€Œæ˜¯ä¸ºäº†æä¾›æ›´å¥½çš„é€»è¾‘å¤ç”¨å’Œæ›´çµæ´»çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚åœ¨å°å‹é¡¹ç›®ä¸­ï¼Œé€‰é¡¹å¼ API ä»ç„¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p>
        </div>
      </div>
    </template>
  </ArticleDetailLayout>
</template>

<script>
import { reactive } from 'vue'
import ArticleDetailLayout from '../../../components/ArticleDetailLayout.vue'

export default {
  name: 'TechArticle1',
  components: {
    ArticleDetailLayout
  },
  setup() {
    const article = reactive({
      id: 1,
      title: 'Vue 3 ç»„åˆå¼APIè¯¦è§£ä¸å®è·µ',
      author: 'éœç®æ”¾',
      readCount: 1205,
      likes: 48,
      date: '2025å¹´7æœˆ16æ—¥',
      category: 'å‰ç«¯æ¡†æ¶',
      tags: ['Vue.js', 'JavaScript', 'å‰ç«¯å¼€å‘']
    })

    const tableOfContents = [
      { id: 'section1', title: 'å‰è¨€' },
      { id: 'section2', title: 'ç»„åˆå¼ API çš„æ ¸å¿ƒæ¦‚å¿µ' },
      { id: 'section3', title: 'å“åº”å¼ API' },
      { id: 'section4', title: 'ç»„åˆå¼å‡½æ•°' },
      { id: 'section5', title: 'æœ€ä½³å®è·µ' },
      { id: 'section6', title: 'æ€»ç»“' }
    ]

    const relatedArticles = [
      { id: 2, title: 'JavaScriptå¼‚æ­¥ç¼–ç¨‹å®Œå…¨æŒ‡å—', date: '07-15' },
      { id: 3, title: 'TypeScriptè¿›é˜¶ä½¿ç”¨æŠ€å·§', date: '07-14' },
      { id: 4, title: 'React Hooksæ·±åº¦è§£æ', date: '07-13' }
    ]

    const onLikeToggled = (newLikes) => {
      console.log('æ–‡ç« ç‚¹èµæ•°æ›´æ–°:', newLikes)
    }

    return {
      article,
      tableOfContents,
      relatedArticles,
      onLikeToggled
    }
  }
}
</script>

<style scoped>
@import '../../../styles/article-content.css';
</style>
